<section class="comments-box" 
    [class.overflow]="dinamicCommentsArray?.length > 1" 
    [hidden]="!dinamicCommentsArray?.length">
    <!-- Spinner -->
    <ng-template #elseTemplate>
        <mat-spinner class="loading"></mat-spinner>
    </ng-template>

    <!-- Select Filter -->
    <mat-form-field class="filter" [hidden]="!(dinamicCommentsArray?.length > 1)">
        <mat-label>Select filter</mat-label>
        <mat-select [formControl]="selectFilerValue" (ngModelChange)="sortByLikes()">
            <mat-option *ngFor="let option of selectOptions" [value]="option.value">
                {{option.title}}
            </mat-option>
        </mat-select>
    </mat-form-field>

    <!-- Comments -->
    <ng-container *ngFor="let singleComment of dinamicCommentsArray; trackBy:trackByComment">
        <!-- If db has user -->
        <!-- ete es fals chi etum ende hamel chi vergrum ng if chi toxum -->
        <app-single-comment  
            *ngIf="decodedZip?.get(singleComment.sender) as decodedFields"
            (likeComment)="toggleLikeComment($event)" 
            (deleteComment)="deleteComment($event)"
            [singleComment]="singleComment" 
            [decodedFields]="decodedFields"
            [senderUid]="singleComment.sender"
            [currentUser]="currentUser" 
            [currentProductId]="productFields.currentProductRouteId">
        </app-single-comment>

    </ng-container>
</section>


<!-- Add comment -->
<div class="write-comment-fields">
    <mat-form-field appearance="outline">
        <mat-label>Write Comment</mat-label>
        <textarea matInput placeholder="Write Good Comment" [formControl]="commentTexteria">
        </textarea>
        <button [_persistance]="addComment" mat-raised-button color="primary">Add Comment
        </button>
    </mat-form-field>
</div>