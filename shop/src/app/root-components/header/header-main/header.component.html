<!-- <app-messenger *ngIf="currentUser"></app-messenger> -->

<div class="header">

  <div class="headerToolBar">
    <div [routerLink]="['home']" id="logo"><b>Mode</b>Concept</div>
    <div class="panel">
      <app-category-panel></app-category-panel>
    </div>
    <div class="search-box">
      <input
      #searchInput
      placeholder="Search by brand, name..."
      type="text"
      (blur)="hideSearchResults()"
      (focus)="displaySearchResults()"
      >
      <app-search [results]="searchResult$ | async" [loading]="isLoading" [hidden]="!displayingResults"></app-search >
    </div>

    <div id="actionButtons">
      <div class="actionButton" *ngIf="currentUser">
        <span class="btn-actions-span">
          {{currentUser.displayName}}
        </span> 
        <img class="profile-picture" matTooltip="Go to profile" [routerLink]="['/','profile']" [src]="currentUser.photoURL">
      </div>
      
      <div class="actionButton" *ngIf="!currentUser" matTooltip="Registrate now">
        <button (click)="signUp()" id="register">Register</button>
      </div>
      <div class="actionButton" *ngIf="!currentUser" matTooltip="Sign-in with E-mail">
        <button (click)="signIn()" id="signIn">Signin</button>
      </div>
      <div class="actionButton" *ngIf="currentUser">
        <button matTooltip="Sign-out from account" id="signOut" (click)="logout()">Logout</button>
      </div>
      <div id="basketIcon" class="actionButton" matTooltip="Go to basket">
        <img [_persistance]="goToBasket" id="basket" src="assets/basket.png">
        <div [style.padding-left]="basketSize < 10 ? '0.5em' : '0.2em'" *ngIf="currentUser" anim-fork-on-changes blink="true" class="basketBadge">
          <span *ngIf="basketSize <= 99">{{basketSize}}</span>
          <span *ngIf="basketSize > 99">99<sup>+</sup></span>
        </div> 
      </div>
      
    </div>
  </div>

  <div id="headerCategories">
    <div routerLinkActive="activeRoute" [routerLink]="['products','category','All']"
      [routerLinkActiveOptions]="{exact: true}" class="category">All categories</div>
    <div routerLinkActive="activeRoute" [routerLink]="['products','category','Watches']" class="category">Watches</div>
    <div routerLinkActive="activeRoute" [routerLink]="['products','category','Sunglasses']" class="category">Sunglasses
    </div>
    <div routerLinkActive="activeRoute" [routerLink]="['products','category','Bracelets']" class="category">Bracelets
    </div>
    <div routerLinkActive="activeRoute" [routerLink]="['products','category','Necklaces']" class="category">Necklaces
    </div>
    <div routerLinkActive="activeRoute" [routerLink]="['products','category','Combo-Box']" class="category">Combo-Boxes
    </div>
  </div>



</div>